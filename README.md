# سیستم فروشگاه چند فروشنده‌ای

این پروژه یک سیستم فروشگاه آنلاین چند فروشنده‌ای است که با استفاده از Laravel توسعه داده شده است. این سیستم به کاربران امکان می‌دهد محصولات را از فروشندگان مختلف خریداری کنند و به فروشندگان اجازه می‌دهد محصولات خود را مدیریت کنند.

## ویژگی‌های اصلی

### مدیریت کاربران
- احراز هویت با OTP (رمز یکبار مصرف)
- سطوح دسترسی مختلف (کاربر عادی، فروشنده، مدیر)
- مدیریت پروفایل کاربری

### مدیریت محصولات
- نمایش محصولات به صورت عمومی
- مدیریت محصولات توسط فروشندگان
- جستجو و فیلتر محصولات
- نظرات و امتیازدهی به محصولات

### سبد خرید
- افزودن محصولات از فروشندگان مختلف به سبد خرید
- به‌روزرسانی تعداد محصولات
- حذف محصولات از سبد خرید
- محاسبه قیمت کل
- گروه‌بندی محصولات بر اساس فروشنده

### فرآیند خرید
- تسویه حساب و ثبت سفارش
- پرداخت آنلاین با درگاه‌های مختلف (زرین‌پال، Pay.ir، IDPay)
- مدیریت وضعیت سفارش
- تاریخچه سفارشات کاربر

### پنل فروشنده
- مدیریت محصولات
- مشاهده سفارشات مربوط به محصولات فروشنده
- به‌روزرسانی وضعیت سفارش
- گزارش‌های فروش

### پنل مدیریت
- مدیریت کاربران
- مدیریت فروشندگان
- ارتقاء کاربران به فروشنده
- نظارت بر سیستم

## تکنولوژی‌ها

- **Backend**: Laravel 10
- **Database**: MySQL
- **Authentication**: Sanctum + OTP
- **Authorization**: Spatie Permission
- **API Documentation**: Swagger/OpenAPI
- **Payment Gateways**: ZarinPal, Pay.ir, IDPay

## معماری

این پروژه از معماری RESTful API استفاده می‌کند و از الگوهای طراحی مختلف بهره می‌برد:

- **Repository Pattern**: برای جداسازی لایه دسترسی به داده
- **Strategy Pattern**: برای مدیریت درگاه‌های پرداخت مختلف
- **Factory Pattern**: برای ایجاد نمونه‌های مناسب از درگاه‌های پرداخت

## نصب و راه‌اندازی

### پیش‌نیازها

- PHP >= 8.1
- Composer
- MySQL
- Node.js و NPM (برای فرانت‌اند)

### مراحل نصب

1. کلون کردن مخزن:
```bash
git clone https://github.com/yourusername/shop.git
cd shop
```

2. نصب وابستگی‌ها:
```bash
composer install
```

3. کپی فایل .env.example به .env و تنظیم متغیرهای محیطی:
```bash
cp .env.example .env
```

4. ایجاد کلید برنامه:
```bash
php artisan key:generate
```

5. اجرای مایگریشن‌ها و سیدها:
```bash
php artisan migrate --seed
```

6. اجرای سرور توسعه:
```bash
php artisan serve
```

## API Documentation

مستندات API با استفاده از Swagger/OpenAPI در آدرس زیر قابل دسترسی است:
```
http://localhost:8000/api/documentation
```

## تست‌ها

برای اجرای تست‌ها:
```bash
php artisan test
```

## ساختار پروژه

- `app/Http/Controllers`: کنترلرهای API
- `app/Models`: مدل‌های داده
- `app/Services`: سرویس‌های مختلف از جمله درگاه‌های پرداخت
- `database/migrations`: مایگریشن‌های پایگاه داده
- `routes/api.php`: مسیرهای API
- `tests/Feature`: تست‌های ویژگی‌ها

## درگاه‌های پرداخت

سیستم از چندین درگاه پرداخت پشتیبانی می‌کند و با استفاده از الگوی Strategy پیاده‌سازی شده است:

- **ZarinPal**: درگاه پرداخت زرین‌پال
- **Pay.ir**: درگاه پرداخت Pay.ir
- **IDPay**: درگاه پرداخت IDPay

برای افزودن درگاه پرداخت جدید، کافی است یک کلاس جدید ایجاد کنید که از `PaymentGatewayInterface` پیروی کند.

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.
